!function(){"use strict";var t=angular.module("sticky",[]);t.directive("sticky",["$window","$timeout",function(t,e){return{restrict:"A",scope:{disabled:"=disabledSticky"},link:function n(o,i,s){function r(){J&&(A.on("scroll",K),R.on("resize",Y),c(),o.$watch(Z,_),o.$on("$destroy",X),J=!1)}function c(){B=o.getInitialDimensions(),j&&(i[0].getBoundingClientRect().height||(H=o.$watch(function(){return i.height()},function t(e,n){e>0&&(B=o.getInitialDimensions(),q||H())})))}function a(e){var n=l(w,e);return 1===n.length?n[0]:t}function l(t,e){var n=[],o=e.parent(),i;do{var s=o[0];if(1!==s.nodeType)break;if(s.tagName.toUpperCase()===t.toUpperCase())return o;i=o.parent(),o=i}while(0!==i.length);return n}function u(e){return"true"===e&&t.innerHeight-(i[0].offsetHeight+parseInt(G))<0}function f(t,e,n){var o="top",i=Math.abs(t-e),s=Math.abs(t-n);return i>s&&(o="bottom"),o}function d(t){I&&i.attr("style",I),T=!1,B.width=o.getInitialDimensions().width,P.removeClass(U),i.removeClass(M),i.addClass(E),"top"===t?(i.removeClass(F),i.css("z-index",10).css("top",B.top).css("background-color","white").css("position",B.position).css("left",B.cssLeft).css("margin-top",B.marginTop).css("height",B.height)):"bottom"===t&&V===!0&&(i.addClass(F),h(),i.css("z-index",10).css("top","").css("bottom",0).css("position","absolute").css("left",B.cssLeft).css("margin-top",B.marginTop).css("margin-bottom",B.marginBottom).css("height",B.height)),W&&t===Q&&W.remove()}function p(t){T=!0,e(function(){B.offsetWidth=i[0].offsetWidth},0),P.addClass(U),i.removeClass(E),i.removeClass(F),i.addClass(M),i.add,h(),i.css("z-index","10").css("position","fixed").css("background-color","#FFFFFF").css("left",i.css("left").replace("px","")+"px").css(Q,G+y(O)+"px").css("margin-top",0),"bottom"===Q&&i.css("margin-bottom",0).css("background-color","yellow")}function g(){d(Q),K()}function h(){if(N){W&&W.remove(),W=angular.element("<div>");var t=i[0].offsetHeight,e=i[0].currentStyle||window.getComputedStyle(i[0]);t+=parseInt(e.marginTop,10),t+=parseInt(e.marginBottom,10),t+=parseInt(e.borderTopWidth,10),t+=parseInt(e.borderBottomWidth,10),W.css("height",i[0].offsetHeight+"px"),i.after(W)}}function m(){return!!(V&&v()>x)}function y(t){var e=0;return t.getBoundingClientRect&&(e=t.getBoundingClientRect().top),e}function v(){var t;return t="undefined"!=typeof O.scrollTop?O.scrollTop:"undefined"!=typeof O.pageYOffset?O.pageYOffset:document.documentElement.scrollTop}function b(){var e;return e=A[0]instanceof HTMLElement?t.getComputedStyle(A[0],null).getPropertyValue("height").replace(/px;?/,""):t.innerHeight,parseInt(e)||0}function C(){var e=s.mediaQuery||!1,n=t.matchMedia;return e&&!(n("("+e+")").matches||n(e).matches)}function S(t,e){var n=t[0],o=window.getComputedStyle(n),i=o.display,s;return n.style.display="none",s=o[e],n.style.display=i,s}var w="sticky-scroll",k=i.css("position"),I=i.attr("style")||"",x=0,T=!1,H,D,L,W,z,B,M=s.stickyClass||"",E=s.unstickyClass||"",U=s.bodyClass||"",F=s.bottomClass||"",O=a(i),R=angular.element(t),A=angular.element(O),P=angular.element(document.body),Y=function(){o.$root&&!o.$root.$$phase?o.$apply(g):g()},N="false"!==s.usePlaceholder,Q="bottom"===s.anchor?"bottom":"top",V="true"===s.confine,j=void 0!==s.isStickyLayoutDeferred&&"true"===s.isStickyLayoutDeferred,q=void 0===s.isStickyLayoutWatched||"true"===s.isStickyLayoutWatched,G=s.offset?parseInt(s.offset.replace(/px;?/,"")):0,J=!0,K=function(){if(o.disabled===!0||C())return T&&d(),!1;var t=v(),e;e="top"===Q?V===!0?t>z&&t<=x:t>z:t<=z;var n=f(t,z,x);!e||u(s.stickLimit)||T?!e&&T?d(n,t):V&&!e&&(L=y(i[0]),d(n,t)):p(n)},X=function(){A.off("scroll",K),R.off("resize",Y),Y=null,P.removeClass(U),W&&W.remove()},Z=function(){if(o.disabled===!0)return d();var t=y(i[0]);return 0===t?t:"top"===Q?(L||t)-y(O)+v():t-b()+i[0].offsetHeight+v()},_=function(t,e){var n=!!t,s=!e,r=t!==e||"undefined"==typeof z,c=!T&&!m();if(r&&c&&t>0&&n){z=t-G,n&&s&&o.updateStickyContentUpdateDimensions(i[0].offsetWidth,i[0].offsetHeight),V&&i.parent().css({position:"relative"});var a=i.parent()[0],l=parseInt(a.offsetHeight)-(N?0:i[0].offsetHeight),u=parseInt(i.css("margin-bottom").replace(/px;?/,""))||0,f=y(i[0]),d=y(a),p=y(O),g=f-p,h=d+l-f;x=g+h-i[0].offsetHeight-u-G+ +v(),K()}};o.getElement=function(){return i},o.getScrollbar=function(){return O},o.getInitialCSS=function(){return B},o.getAnchor=function(){return Q},o.isSticking=function(){return T},o.getOriginalInitialCSS=function(){return D},o.processUnStickElement=function(t){d(t)},o.processCheckIfShouldStick=function(){K()},o.getInitialDimensions=function(){return{zIndex:i.css("z-index"),top:i.css("top"),position:k,marginTop:i.css("margin-top"),marginBottom:i.css("margin-bottom"),cssLeft:S(i,"left"),width:i[0].offsetWidth,height:i.css("height")}},o.updateStickyContentUpdateDimensions=function(t,e){t&&e&&(r(),B.width=t+"px",B.height=e+"px")},e(function(){D=o.getInitialDimensions(),r()},0)},controller:["$scope","$window",function(t,e){this.resetLayout=function(n,o){function i(){"top"===c&&(s===e?e.scrollTo(0,0):s.scrollTop>0&&(s.scrollTop=0))}var s=t.getScrollbar(),r=t.getInitialCSS(),c=t.getAnchor();if(t.isSticking()&&(t.processUnStickElement(c),t.processCheckIfShouldStick()),t.getElement().css({width:"",height:"",position:"",top:"",zIndex:""}),r.position=t.getOriginalInitialCSS().position,delete r.offsetWidth,void 0===n&&void 0===o){var a=t.getElement()[0].getBoundingClientRect();n=a.width,o=a.height}t.updateStickyContentUpdateDimensions(n,o),i()},this.getScrollbar=function(){return t.getScrollbar()}}]}}]),window.matchMedia=window.matchMedia||function(){var t="angular-sticky: This browser does not support matchMedia, therefore the minWidth option will not work on this browser. Polyfill matchMedia to fix this issue.";return window.console&&console.warn&&console.warn(t),function(){return{matches:!0}}}()}();